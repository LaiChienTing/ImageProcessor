# 區域選取與放大功能使用指南

## 功能概述

此功能允許使用者在主視窗中選取原圖片的一個區域，並在新視窗中以自訂的倍率放大該區域。新視窗提供存檔和畫筆功能，可以塗改放大後的圖片。

## 使用方法

### 1. 選取區域

在主視窗載入圖片後：

1. **按住 Ctrl 鍵** + **滑鼠左鍵拖曳** 來選取想要放大的區域
2. 拖曳過程中會顯示藍色虛線選取框
3. 釋放滑鼠後，系統會彈出對話框詢問放大倍率

### 2. 設定放大倍率

- 在對話框中輸入 1.0 到 10.0 之間的放大倍率
- 預設值為 2.0（放大兩倍）
- 點擊確定後會開啟放大視窗

### 3. 放大視窗功能

放大視窗提供以下功能：

#### 存檔功能
- 點擊工具列的「存檔」按鈕
- 選擇儲存位置和檔案格式（支援 PNG、JPEG、BMP）
- 儲存的圖片包含所有繪製的內容

#### 畫筆功能
- **畫筆顏色**：點擊「畫筆顏色」按鈕選擇顏色
- **畫筆寬度**：使用工具列的滑桿調整畫筆寬度（1-20 像素）
- **繪圖**：直接用滑鼠左鍵在圖片上拖曳即可繪圖
- **清除繪圖**：點擊「清除繪圖」按鈕可清除所有繪製內容，恢復原始放大圖片

## 技術實作細節

### 新增檔案

1. **zoomwindow.h** - 放大視窗類別標頭檔
2. **zoomwindow.cpp** - 放大視窗類別實作檔

### 修改檔案

1. **imageprocessor.h** - 新增區域選取相關的成員變數和方法
2. **imageprocessor.cpp** - 實作區域選取邏輯和滑鼠事件處理
3. **ImageProcessor.pro** - 加入新的原始檔案

### 主要功能說明

#### 區域選取（ImageProcessor）

- 使用 `isSelecting` 標誌追蹤選取狀態
- `selectionStart` 和 `selectionEnd` 記錄選取範圍的起始和結束點
- `paintEvent()` 繪製選取框的視覺回饋
- `openZoomWindow()` 建立並顯示放大視窗

#### 放大視窗（ZoomWindow）

- 根據選取區域和放大倍率建立放大圖片
- 使用 `QScrollArea` 容納大型放大圖片
- 實作畫筆系統：
  - 支援自訂顏色和寬度
  - 使用 `QPainter` 在圖片上繪製
  - 滑鼠事件處理繪圖操作
- 存檔功能支援多種圖片格式

## 注意事項

1. 必須先載入圖片才能使用區域選取功能
2. 選取區域必須至少 10x10 像素才會觸發放大視窗
3. 選取時必須按住 Ctrl 鍵，避免與其他功能衝突
4. 原有的雙擊、拖放等功能不受影響
5. 放大視窗關閉時會自動釋放資源

## 相容性

此功能完全相容原有的影像處理功能，不會影響：
- 開啟檔案
- 幾何轉換
- 放大/縮小功能
- 滑鼠座標顯示
